{% extends 'base.html.twig' %}

{% block title %}Admin - Tasks!{% endblock %}

{% block body %}
    <div class="accordion" id="accordion">
        {% for i, task in tasks %}
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-{{ i }}" aria-expanded="false" aria-controls="collapse-{{ i }}">
                        <span>{{ task.title }}</span>
                    </button>
                </h2>
                <div id="collapse-{{ i }}" class="accordion-collapse collapse" data-bs-parent="#accordion">
                    <figure class="accordion-body">
                        {% if task.imageName %}
                            <img src="{{ vich_uploader_asset(task) }}" alt="{{ task.title }}">
                        {% endif %}

                        <figcaption>
                            {% if task.description %}
                                <p>{{ task.description }}</p>
                            {% endif %}

                            <div class="btn-group" role="group" aria-label="CRUD control">
                                <a class="btn btn-primary" href="{{ path('app_admin_task_update', {id: task.id}) }}">
                                    <span>{{ 'Update'|trans }}</span>
                                </a>

                                <form class="delete-task btn btn-primary p-0" action="{{ path('app_admin_task_delete', {id: task.id}) }}" method="post">
                                    <input type="hidden" name="_token" value="{{ csrf_token('delete-' ~ task.id) }}">
                                    <input type="hidden" name="_method" value="DELETE">

                                    <button class="btn btn-primary" type="submit">{{ 'Delete'|trans }}</button>
                                </form>
                            </div>
                        </figcaption>
                    </figure>
                </div>
            </div>
        {% endfor %}
    </div>
{% endblock %}
